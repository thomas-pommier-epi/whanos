FROM alpine:3.20

LABEL base-image-name="whanos-javascript"

ONBUILD RUN apk add --no-cache bash

ONBUILD SHELL ["/bin/bash", "-c"]
ONBUILD ENV SHELL=/bin/bash

##

WORKDIR /app

ONBUILD RUN apk add --no-cache nodejs npm

ONBUILD COPY package.json /app

ONBUILD RUN if [ ! -f package.json ]; then echo "package.json not found!" && exit 1; fi

ONBUILD RUN  apk add --no-cache npm \
    && npm install \
    && npm cache clean --force \
    && apk del npm \
    && rm -rf /tmp/* /var/tmp/*

ONBUILD COPY /app /app
